(function(){(new(function(){class t{constructor(){this.samsara=this.samsara.bind(this)}create(t={},s){var r;if("string"==typeof t&&void 0!==s)this[t]=s;else for(r in t)s=t[r],this[r]=s;this.world=this.create_world(),this.samsara()}travel_world(t){var s,r,o,e,a;for(e=[],a=r=0,o=this.roll_num;0<=o?r<o:r>o;a=0<=o?++r:--r)e.push(function(){var r,o,e;for(e=[],s=r=0,o=this.column_num;0<=o?r<o:r>o;s=0<=o?++r:--r)e.push(t.call(this,{row:a,column:s}));return e}.call(this));return e}create_world(){return this.draw_world(),this.travel_world(t=>(t.status=Math.random()<this.born_prob,t))}draw_world(){return this.canvas=document.createElement("canvas"),this.canvas.width=this.cell_size*this.column_num,this.canvas.height=this.cell_size*this.roll_num,document.getElementById(this.dom_id).appendChild(this.canvas),this.canvas_context=this.canvas.getContext("2d")}draw(t){var s;return s=[t.row*this.cell_size,t.column*this.cell_size,this.cell_size,this.cell_size],this.canvas_context.strokeStyle=this.grid_color,this.canvas_context.strokeRect.apply(this.canvas_context,s),this.canvas_context.fillStyle=t.status?this.alive_color:this.dead_color,this.canvas_context.fillRect.apply(this.canvas_context,s)}samsara(){return this.world=this.travel_world(t=>(t=this.world[t.row][t.column],this.draw(t),this.dead_or_alive(t))),setTimeout(this.samsara,this.draw_rate)}dead_or_alive(t){var s;return s=this.count_neighbor(t),t=this.review_status(t,s)}count_neighbor(t){var s,r,o,e,a,i,l;for(e=0,l=r=-1;r<=1;l=++r)for(s=o=-1;o<=1;s=++o)i=t.row+l,a=t.column+s,(l||s)&&this.is_alive(i,a)&&++e;return e}is_alive(t,s){return void 0!==this.world[t]&&void 0!==this.world[t][s]&&this.world[t][s].status}review_status(t,s){return t={row:t.row,column:t.column,status:t.status},s<2||s>3?t.status=!1:3===s&&(t.status=!0),t}}return t.prototype.dom_id="game-of-life",t.prototype.roll_num=25,t.prototype.column_num=25,t.prototype.cell_size=12,t.prototype.draw_rate=100,t.prototype.born_prob=.5,t.prototype.alive_color="#42a5f5",t.prototype.dead_color="#121212",t.prototype.grid_color="rgba(255, 255, 255, 0.2)",t}.call(this))).create()}).call(this);